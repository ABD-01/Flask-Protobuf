{% extends 'base.html' %}

{% block title %}
    Telemetry
{% endblock %}
  
{% block navbar %}
    <!-- Navbar -->
    <nav class="navbar navbar-default navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Proto Server</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="/">Command-Response</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="/telemetry">Telemetry</a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" href="#">Events</a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" aria-disabled="true">Vsoh</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/docs">Docs</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
{% endblock %}

{% block content %}

    <div class="container mt-5">
        <div>
            <div class="col-md-12 card">
                <h3 class="card-header">Command Response</h3>
                <div id="response" class="card-body"></div>
                <div id="responseHex" class="card-footer text-body-secondary"></div>
            </div>
        </div>
    </div>

    <script src="static/random_table.js"></script>
    <script>
      function simulateTelemetry() {
        showToast({
            header: 'MQTT Response received on (Demo)',
            data: "/test/topic/telemetry",
        });
        $('#response').html(generateRandomTable());
      }
      setInterval(simulateTelemetry, 3000); 
      
    </script>
{% endblock %}